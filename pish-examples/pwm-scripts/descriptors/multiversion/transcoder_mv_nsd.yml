---
descriptor_version: '1.0'
vendor: "cn-upb"
name: "transcoder_mv"
version: '1.0'
author: "Ashwin Prasad"
description: "Transcoder NS MV"  
network_functions:
  - vnf_id: "transcoder-image1"
    vnf_vendor: "cn-upb"
    vnf_name: "transcoder-image-1-mv"
    vnf_version: '1.0'
    multi_version: true

connection_points:
  - id: "mgmt"
    interface: "ipv4"
    type: "management"
  - id: "input"
    interface: "ipv4"
    type: "external"
  - id: "output"
    interface: "ipv4"
    type: "external"

##
## The virtual links that interconnect
## the different connections points.
##
virtual_links:
  - id: "mgmt"
    connectivity_type: "E-LAN"
    connection_points_reference:
      - "transcoder-image1:mgmt"
      - "mgmt"
  - id: "input-2-iperf"
    connectivity_type: "E-Line"
    connection_points_reference:
      - "input"
      - "transcoder-image1:input"
  - id: "tcpdump-2-output"
    connectivity_type: "E-Line"
    connection_points_reference:
      - "transcoder-image1:output"
      - "output"
      
# monitoring_parameters:
#   - name: "vm_cpu_perc"
#     unit: "Percentage"
#   - name: "vm_mem_pers"
#     unit: "Percentage"
#   - name: "vm_net_rx_MB"
#     unit: "MB"
#   - name: "vm_net_tx_MB"
#     unit: "Mbps"  

# monitoring_rules:
#   - name: "mon:rule:vm_cpu_perc"
#     description: "Trigger events if CPU load is above 10 percent."
#     duration: 5
#     duration_unit: "s"
#     condition: "cirros-image1:vm_cpu_perc > 0"
#     notification:
#       - name: "notification01"
#         type: "rabbitmq_message"
#   - name: "mon:rule:vm_mem_perc"
#     description: "Trigger events if memory consumption is above 10 percent."
#     duration: 10
#     duration_unit: "s"
#     condition: "cirros-image1:vm_mem_perc > 0"
#     notification:
#       - name: "notification02"
#         type: "rabbitmq_message"
#   - name: "mon:rule:rx"
#     duration: 10
#     duration_unit: "s"
#     condition: "cirros-image1:vm_net_rx_MB > 10"
#     notification:
#       - name: "notification03"
#         type: "rabbitmq_message"
#   - name: "mon:rule:tx"
#     duration: 10
#     duration_unit: "s"
#     condition: "cirros-image1:vm_net_tx_MB > 10"
#     notification:
#       - name: "notification04"
#         type: "rabbitmq_message"      
